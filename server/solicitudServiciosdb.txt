create table dbo.facultad (
facultad_id serial primary key not null,
nombre character varying not null,
direccion character varying not null default 'N/A'
);

create table dbo.escuela(
escuela_id serial primary key not null,
nombre character varying not null,
direccion character varying not null default 'N/A',
facultad_id int references dbo.facultad(facultad_id)
);

create table dbo.carrera (
carrera_id serial primary key not null,
nombre character varying unique not null,
escuela_id int references dbo.escuela(escuela_id)
);

create table dbo.rol(
rol_id serial primary key not null,
rol character varying default 'User',
descripcion character varying default 'N/A'
);



create table dbo.usuario(
usuario_id serial primary key not null,
nombre character varying not null,
apellido character varying not null,
cedula character varying(11) unique not null,
matricula character varying unique not null,
correo character varying unique not null,
rol_id int references dbo.rol(rol_id),
carrera_id int references dbo.carrera(carrera_id) not null
);

create table dbo.servicios (
servicio_id serial primary key not null,
codigo character varying not null,
descripcion character varying not null,
facultad_id int references dbo.facultad(facultad_id) not null,
usuario_id int references dbo.usuario(usuario_id) not null,
url character varying not null,
costo numeric (100,2) not null,
fecha_creacion timestamp default now(),
detalle character varying default 'N/A',
parent_id int references dbo.servicios(servicio_id)
);


create table dbo.solicitud (
solicitud_id serial primary  key not null,
nombre character varying not null,
descripcion character varying not null,
servicio_id int references dbo.servicios(servicio_id) not null,
usuario_id int references dbo.usuario(usuario_id) not null
);

INSERT INTO dbo.facultad
(nombre, direccion)
values
('Humaninades', 'N/A'::character varying),('Ciencias', 'N/A'::character varying),
('Economicas y Sociales', 'N/A'::character varying),('Juridicas y Politicas', 'N/A'::character varying),
('Ingenieria y Arquitectura', 'N/A'::character varying),('Ciencias de la Salud', 'N/A'::character varying),
('Agronomicas y Veterinarias', 'N/A'::character varying),('Artes', 'N/A'::character varying),
('Educacion', 'N/A'::character varying);

INSERT INTO dbo.escuela
(nombre, direccion, facultad_id)
VALUES('Biologia', 'N/A'::character varying, 2),('Ciencias Geograficas', 'N/A'::character varying, 2),
('Fisica', 'N/A'::character varying, 2),('Matematicas', 'N/A'::character varying, 2),
('Microbiologia y Parasitologia', 'N/A'::character varying, 2),('Quimica', 'N/A'::character varying, 2),
('Informatica', 'N/A'::character varying, 2);


INSERT INTO dbo.carrera
(nombre, escuela_id)
VALUES('Licenciatura en Informatica', 7), ('Tecnico en Infraestructura de TIC',7);

INSERT INTO dbo.rol
(rol, descripcion)
values
('Estudiante'::character varying, 'Usuario normal'::character varying),
('Profesor'::character varying, 'Profesor con roles'::character varying),
('Admin'::character varying, 'User admin'::character varying);


INSERT INTO dbo.usuario
(nombre, apellido, cedula, matricula, correo, rol_id, carrera_id)
VALUES('Jon', 'Doe', 'N/A', 'N/A', 'jondoe@uasd.edu.do', 3, 1);

INSERT INTO dbo.usuario
(nombre, apellido, cedula, matricula, correo, rol_id, carrera_id)
VALUES('Rousbel', 'Villar', '40223502697', '100233274', 'rousbel_01@hotmail.com', 1, 1);



INSERT INTO dbo.servicios
(codigo, nombre, descripcion, usuario_id, url, costo, respuesta, fecha_creacion, fecha_est_finalizacion, detalle, parent_id)
VALUES('001', 'Cartas','Todo tipo de carta dirigida a persona o entidad', 2, 'N/A', 500, 'En espera'::character varying, now(), (now() + '2 days'::interval), 'N/A'::character varying, 1);


INSERT INTO dbo.servicios
(codigo, nombre, descripcion, usuario_id, url, costo, respuesta, fecha_creacion, fecha_est_finalizacion, detalle, parent_id)
VALUES('001-01', 'Ultima Materia','N/A', 2, 'N/A', 500, 'En espera'::character varying, now(), (now() + '2 days'::interval), 'N/A'::character varying, 1);


INSERT INTO dbo.servicios
(codigo, nombre, descripcion, usuario_id, url, costo, respuesta, fecha_creacion, fecha_est_finalizacion, detalle, parent_id)
VALUES('001-02', 'Anillo de Graduado','N/A', 2, 'N/A', 500, 'En espera'::character varying, now(), (now() + '2 days'::interval), 'N/A'::character varying, 1);


INSERT INTO dbo.servicios
(codigo, nombre, descripcion, usuario_id, url, costo, respuesta, fecha_creacion, fecha_est_finalizacion, detalle, parent_id)
VALUES('001-03', 'Execuatur o Grado','N/A', 2, 'N/A', 500, 'En espera'::character varying, now(), (now() + '2 days'::interval), 'N/A'::character varying, 1);

INSERT INTO dbo.servicios
(codigo, nombre, descripcion, usuario_id, url, costo, respuesta, fecha_creacion, fecha_est_finalizacion, detalle, parent_id)
VALUES('001-04', 'Finalizacion sin tesis','N/A', 2, 'N/A', 500, 'En espera'::character varying, now(), (now() + '2 days'::interval), 'N/A'::character varying, 1);

INSERT INTO dbo.servicios
(codigo, nombre, descripcion, usuario_id, url, costo, respuesta, fecha_creacion, fecha_est_finalizacion, detalle, parent_id)
VALUES('001-05', 'Finalizacion con tesis','N/A', 2, 'N/A', 500, 'En espera'::character varying, now(), (now() + '2 days'::interval), 'N/A'::character varying, 1);

INSERT INTO dbo.servicios
(codigo, nombre, descripcion, usuario_id, url, costo, respuesta, fecha_creacion, fecha_est_finalizacion, detalle, parent_id)
VALUES('002', 'Record de Notas','Relación de notas de las asignaturas inscritas registrada en cada período académico. Puede ser personal o vía
MESCyT', 2, 'N/A', 500, 'En espera'::character varying, now(), (now() + '2 days'::interval), 'N/A'::character varying, 2);

INSERT INTO dbo.servicios
(codigo, nombre, descripcion, usuario_id, url, costo, respuesta, fecha_creacion, fecha_est_finalizacion, detalle, parent_id)
VALUES('002-01', 'Record de Notas oficial','Relación de notas de las asignaturas inscritas registrada en cada período académico, personal.', 2, 'N/A', 500, 'En espera'::character varying, now(), (now() + '2 days'::interval), 'N/A'::character varying, 2);

INSERT INTO dbo.servicios
(codigo, nombre, descripcion, usuario_id, url, costo, respuesta, fecha_creacion, fecha_est_finalizacion, detalle, parent_id)
VALUES('002-02', 'Record de Notas oficio MESCyT','Relación de notas de las asignaturas inscritas registrada en cada período académico, via MESCyT.', 2, 'N/A', 500, 'En espera'::character varying, now(), (now() + '2 days'::interval), 'N/A'::character varying, 2);

INSERT INTO dbo.servicios
(codigo, nombre, descripcion, usuario_id, url, costo, respuesta, fecha_creacion, fecha_est_finalizacion, detalle, parent_id)
VALUES('003', 'Certificaciones','Constacia para algun fin', 2, 'N/A', 500, 'En espera'::character varying, now(), (now() + '2 days'::interval), 'N/A'::character varying, 3);

INSERT INTO dbo.servicios
(codigo, nombre, descripcion, usuario_id, url, costo, respuesta, fecha_creacion, fecha_est_finalizacion, detalle, parent_id)
VALUES('003-01', 'Certificado de titulo','Constacia para algun fin', 2, 'N/A', 500, 'En espera'::character varying, now(), (now() + '2 days'::interval), 'N/A'::character varying, 3);

alter table dbo.solicitud add column fecha_solicitada timestamp default now()
alter table dbo.solicitud add column fecha_est_finalizada timestamp default (now() + '2 day'::interval)
alter table dbo.solicitud add column respuesta character varying default 'En progreso - Pendiente de pago'

INSERT INTO dbo.solicitud
(nombre, descripcion, servicio_id, usuario_id, carrera_id, fecha_solicitada, fecha_est_finalizada, respuesta)
VALUES('Solicitud para anillo de graduado', 'Hacer lo mas pronto posible', 3, 1, 1, now(), (now() + '2 days'::interval), 'En progreso - Pendiente de pago'::character varying);



